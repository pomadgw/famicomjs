import{SvelteComponent as p,append as d,attr as h,destroy_each as P,detach as _,element as u,init as k,insert as g,noop as b,safe_not_equal as w,set_data as v,space as x,text as S}from"../../web_modules/svelte/internal.js";import y from"../6502/instructions/index.js";import A,{argParamsGenerator as M}from"../6502/disassembler/index.js";function E(f,r,a){const l=f.slice();return l[5]=r[a][0],l[6]=r[a][1],l}function j(f){let r,a,l=f[5]+"",n,t,i,e=f[6]+"",o,c;return{c(){r=u("tr"),a=u("td"),n=S(l),t=x(),i=u("td"),o=S(e),c=x(),h(a,"class","w-1/3")},m(s,m){g(s,r,m),d(r,a),d(a,n),d(r,t),d(r,i),d(i,o),d(r,c)},p(s,m){m&1&&l!==(l=s[5]+"")&&v(n,l),m&1&&e!==(e=s[6]+"")&&v(o,e)},d(s){s&&_(r)}}}function R(f){let r,a,l=f[0],n=[];for(let t=0;t<l.length;t+=1)n[t]=j(E(f,l,t));return{c(){r=u("div"),a=u("table");for(let t=0;t<n.length;t+=1)n[t].c();h(a,"class","font-mono table-fixed")},m(t,i){g(t,r,i),d(r,a);for(let e=0;e<n.length;e+=1)n[e].m(a,null)},p(t,[i]){if(i&1){l=t[0];let e;for(e=0;e<l.length;e+=1){const o=E(t,l,e);n[e]?n[e].p(o,i):(n[e]=j(o),n[e].c(),n[e].m(a,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=l.length}},i:b,o:b,d(t){t&&_(r),P(n,t)}}}function q(f,r,a){let{ram:l}=r,{offsetStart:n}=r,{offsetEnd:t}=r;const i=M(t);f.$$set=o=>{"ram"in o&&a(1,l=o.ram),"offsetStart"in o&&a(2,n=o.offsetStart),"offsetEnd"in o&&a(3,t=o.offsetEnd)};let e;return f.$$.update=()=>{if(f.$$.dirty&14){t:a(0,e=(()=>{const o=[];let c=0;for(let s=n;s<t;s+=1)c-=1,c<=0&&(c=i[y[l[s]].addressingName].length),o.push(l[s]);if(c>0)for(let s=t;s<t+c;s+=1)o.push(l[s]);return Object.entries(A(o,{binaryStart:n}))})())}},[e,l,n,t]}class C extends p{constructor(f){super();k(this,f,q,R,w,{ram:1,offsetStart:2,offsetEnd:3})}}export default C;
