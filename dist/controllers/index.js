function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function a(r,t,o){return t&&n(r.prototype,t),o&&n(r,o),r}export var Button={A:1<<0,B:1<<1,Select:1<<2,Start:1<<3,Up:1<<4,Down:1<<5,Left:1<<6,Right:1<<7};var i=function(){function r(t){var o=this;s(this,r),this.buttonStatus=0,this.strobe=!1,this.cursor=0,t&&(document.addEventListener("keydown",function(e){var u=t[e.code];o.setButtonState(u,!0)}),document.addEventListener("keyup",function(e){var u=t[e.code];o.setButtonState(u,!1)}))}return a(r,[{key:"write",value:function(t){this.strobe=(t&1)!==0,this.strobe&&(this.cursor=0)}},{key:"read",value:function(){if(this.strobe)return this.buttonStatus&1;if(this.cursor>=8)return 0;var t=this.buttonStatusToSend;return this.cursor+=1,t}},{key:"setButtonState",value:function(t,o){var e=Button[t];if(!e)return;this.buttonStatus&=~e,o&&(this.buttonStatus|=e)}},{key:"buttonStatusToSend",get:function(){return this.buttonStatus>>this.cursor&1}}]),r}();export{i as default};
